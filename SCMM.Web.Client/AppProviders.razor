@inject AppState State

<MudThemeProvider Theme="@Theme" />
<MudSnackbarProvider />
<MudDialogProvider />

@code
{
    private MudTheme Theme { get; set; }

    protected override void OnInitialized()
    {
        BuildTheme();
        State.Changed += (s, e) =>
        {
            BuildTheme();
            StateHasChanged();
        };
    }

    private void BuildTheme()
    {
        Theme = new MudTheme()
        {
            Palette = new MudBlazor.Palette()
            {
                Surface = (State.App?.BackgroundColor ?? "#333333"),
                DrawerBackground = (State.App?.BackgroundColor ?? "#333333"),
                DrawerText = "#dddddd",
                DrawerIcon = "#dddddd", 
                AppbarBackground = "rgb(51,51,51)",
                AppbarText = "rgb(255,255,255)",
                LinesDefault = "rgba(255,255,255, 0.12)",
                LinesInputs = "rgba(255,255,255, 0.3)",
                Background = "rgb(0,0,0)",
                BackgroundGrey = "rgb(0,0,0)",
                TableLines = "rgba(255,255,255, 0.12)",
                //TableHover = null,
                Divider = "rgba(255,255,255, 0.12)",
                DividerLight = "rgba(255,255,255, 0.06)",
                //GrayDefault = null,
                //GrayLight = null,
                //GrayLighter = null,
                //GrayDark = null,
                //GrayDarker = null,
                //TableStriped = null,
                ActionDisabledBackground = "rgba(255,255,255, 0.12)",
                ActionDisabled = "rgba(255,255,255, 0.26)",
                ActionDefault = "#adadb1",
                Black = "#000000",
                White = "#ffffff",
                Primary = (State.App?.PrimaryColor ?? "#66c0f4"), // Steam blue
                PrimaryContrastText = "#111111",
                Secondary = (State.App?.SecondaryColor ??  "#9B9B9B"), // Steam grey
                SecondaryContrastText = "#111111",
                Tertiary = (State.App?.PrimaryColor ?? "#c5412b"),
                TertiaryContrastText = "#111111",
                Info = "#1976d2",
                InfoContrastText = "#111111",
                Success = "#388e3c",
                SuccessContrastText = "#111111",
                Warning = "#ffa000",
                WarningContrastText = "#111111",
                Error = "#d32f2f",
                ErrorContrastText = "#111111",
                Dark = "#171a21", // Steam dark
                DarkContrastText = "#eeeeee",
                TextPrimary = "#eeeeee",
                TextSecondary = "#dddddd",
                TextDisabled = "#666666",
                //OverlayDark = "rgba(0,0,0, 0.4)",
                //OverlayLight = "rgba(0,0,0, 0.8)"
                HoverOpacity = 0.2d
            }
        };    
    }

}
