@inherits LayoutComponentBase
@inject NavigationManager NavigationManager
@inject AppState State

<MudLayout>
    <MudAppBar Fixed="true" Dense="false" Elevation="4">
        <MudIconButton Edge="MudBlazor.Edge.Start" Icon="@Icons.Material.Filled.Menu" OnClick="@((e) => ToggleDrawer())" />
        <MudText Typo="Typo.h4" Class="ml-2 pt-2">
            <img src="/images/@(State.App.Name.ToLower())-logo.svg" style="height:1em" />
        </MudText>
        <MudText Typo="Typo.h6" Class="ml-4">
            <MudHidden Breakpoint="MudBlazor.Breakpoint.MdAndUp" Invert="true">
                <span>Steam Community Market Manager</span>
                <MudChip Variant="MudBlazor.Variant.Text" Size="MudBlazor.Size.Small" OnClick="@ViewAboutPage" Class="mud-chip-outlined">@AppTag</MudChip>
            </MudHidden>
            <MudHidden Breakpoint="MudBlazor.Breakpoint.Sm" Invert="true">
                <span>SCMM</span>
                <MudChip Variant="MudBlazor.Variant.Text" Size="MudBlazor.Size.Small" OnClick="@ViewAboutPage" Class="mud-chip-outlined">@AppTag</MudChip>
            </MudHidden >
        </MudText>
        <MudSpacer />
        <RuntimePicker class="mx-2" />
        <CurrencyPicker class="ml-2" />
    </MudAppBar>
    <MudDrawer @bind-Open="IsDrawerOpen" Variant="MudBlazor.DrawerVariant.Responsive" ClipMode="DrawerClipMode.Always" Breakpoint="MudBlazor.Breakpoint.Md" Elevation="2">
        <AppNavigationMenu />
    </MudDrawer>
    <MudMainContent Style="height:100vh; overflow-y:scroll; overflow-x:hidden;">
        @Body
    </MudMainContent>
</MudLayout>

@code
{
    private bool IsDrawerOpen { get; set; } = true;

    private string AppTag { get; set; } = "Arvid Edition";

    void ToggleDrawer()
    {
        IsDrawerOpen = !IsDrawerOpen;
    }
    
    private void ViewAboutPage()
    {
        NavigationManager.NavigateTo($"/about");
    }

}
