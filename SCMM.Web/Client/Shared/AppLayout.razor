@inherits LayoutComponentBase
@inject NavigationManager Navigation

<MainLayout>
    <LogoContent>
        <AppLogo />
    </LogoContent>
    <TitleContent>
        <span>Rust - Steam Community Market</span>
        <Fab Variant="@FabVariant.Extended" Size="@Size.Small" Color="@Color.TextPrimary" OnClick="@ViewAboutPage" Style="margin: 8px; height:24px">
            Preview
        </Fab>
    </TitleContent>
    <ActionsContent>
        <Hidden MediumDown Context="HiddenContext">
            <div Class="@HiddenContext.Class">

            </div>
        </Hidden>
    </ActionsContent>
    <SidebarContent>
        @if (navigationItems != null)
        {
            <Navigation Items="@navigationItems">
            </Navigation>
        }
    </SidebarContent>
    <BodyContent>
        @Body
    </BodyContent>
    <FooterContent>
        <Typography Variant="@TypographyVariant.Body2">
            <span><strong>SCMM</strong></span>
            <span>&copy; 2020 Rhys Koedijk</span>
        </Typography>
    </FooterContent>
</MainLayout>

<DonateDialog @bind-Open="isDonateOpen" />

@code {

    private List<NavigationItem> navigationItems;
    private bool isDonateOpen;

    protected override async Task OnInitializedAsync()
    {
        navigationItems = BuildGeneralNaviationItems();
    }

    private void DonationOpen()
    {
        isDonateOpen = true;
        StateHasChanged();
    }

    private void ViewAboutPage()
    {
        Navigation.NavigateTo($"about");
    }

    private List<NavigationItem> BuildGeneralNaviationItems()
    {
        return new List<NavigationItem>
{
            new NavigationItem
            {
                Icon = @<SwapBagIcon />,
                Title = "My Inventory",
                Path = "steam/inventory",
                Prefix = false,
                Disabled = true
            },
            new NavigationItem
            {
                Icon = @<CashIcon />,
                Title = "My Trade History",
                Path =  "steam/history",
                Prefix =  true,
                Disabled = true
            },
            null,
            new NavigationItem
            {
                Icon = @<ChartIcon />,
                Title = "Market Statistics",
                Path = "steam/marketstatistics",
                Prefix = false
            },
            new NavigationItem
            {
                Icon = @<ArtificialIntelligenceIcon />,
                Title = "Market Insights",
                Path =  "steam/marketinsights",
                Prefix =  true,
                Disabled = true
            },
            new NavigationItem
            {
                Icon = @<TakeMyMoneyIcon />,
                Title = "Market Listings",
                Path = "steam/marketplace",
                Prefix = true
            },
            new NavigationItem
            {
                Icon = @<PriceTagIcon />,
                Title = "Item Store",
                Path =  "steam/store",
                Prefix =  true
            },
            new NavigationItem
            {
                Icon = @<SprayIcon />,
                Title = "Item Workshop",
                Path =  "steam/workshop",
                Prefix =  true,
                Disabled = true
            },
            null,
            new NavigationItem
            {
                Icon = @<InformationIcon />,
                Title = "About",
                Path =  "about",
                Prefix =  true
            },
            new NavigationItem
            {
                Icon = @<ReceiveMoneyIcon />,
                Title = "Donate",
                SubTitle = "Show your support",
                OnClick = DonationOpen
            }
        };
        }

}
